<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>{{ title or "BudgetMariage ‚Äì Simulateur de budget de mariage" }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  {% if seo_desc %}<meta name="description" content="{{ seo_desc | safe }}">{% endif %}

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Playfair+Display:wght@600;800&display=swap" rel="stylesheet">

  <!-- Favicon -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 100 100%27><text y=%27.9em%27 font-size=%2790%27>üíç</text></svg>">

  <!-- AdSense (remplace le client par le tien) -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXX" crossorigin="anonymous"></script>

  <script>
    /* Redirige les liens d‚Äôinvitation Netlify Identity vers /admin */
    if (location.hash && location.hash.includes('invite_token')) {
      location.href = '/admin/' + location.hash;
    }
  </script>

  <style>
    :root{
      --brand:#3e5c49;     /* vert sauge fonc√© */
      --brand-2:#6f8f7b;   /* vert eucalyptus */
      --accent:#c99a6d;    /* or/terracotta doux */
      --bg:#f7f5f1;        /* lin clair */
      --ink:#21312a;       /* texte */
      --muted:#6f7b74;
      --card:#ffffff;
      --line:#e7e2d9;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--ink);font-family:Inter,system-ui,Arial;display:flex;flex-direction:column}
    h1,h2,h3{font-family:"Playfair Display",serif}
    a{color:inherit}
    .container{max-width:1080px;margin:auto;padding:22px;flex:1 0 auto}
    header{display:flex;align-items:center;gap:10px;padding:8px 0}
    .badge{display:inline-block;font-size:12px;padding:4px 8px;border-radius:999px;background:var(--accent);color:#21190e;font-weight:700}
    .brand{font-size:22px;margin:0;font-weight:800;color:var(--brand);text-decoration:none}
    .tagline{margin-left:auto;color:var(--muted);font-size:13px}

    .top-ad{margin:8px 0 12px}
    .ad-slot{background:#f2efe9;border:1px dashed #d8cfbf;border-radius:10px;padding:10px;text-align:center;color:#7a7468;font-size:12px}

    .grid{display:grid;gap:16px}
    @media(min-width:1000px){.grid{grid-template-columns:1.2fr .8fr}}

    .card{background:var(--card);border:1px solid var(--line);border-radius:16px;padding:18px;box-shadow:0 10px 26px rgba(62,92,73,.06)}
    .section-title{font-weight:800;margin:6px 0 10px;color:var(--brand)}
    .muted{color:var(--muted);font-size:13px}
    .hr{margin:14px 0;border:none;border-top:1px solid var(--line)}

    .pillrow{display:flex;gap:8px;flex-wrap:wrap}
    .pill button{border:1px solid var(--line);background:#fff;padding:8px 12px;border-radius:999px;cursor:pointer}
    .pill button.active{border-color:var(--brand);box-shadow:0 0 0 2px rgba(62,92,73,.15)}

    .selectwrap{background:#f3f1ed;border:1px solid #e5ded3;padding:10px;border-radius:12px;display:flex;align-items:center;gap:10px;flex-wrap:wrap}
    select,input[type=number]{border:1px solid #d7d0c5;border-radius:10px;padding:9px 10px;min-width:160px;background:#fff}

    .cta{background:linear-gradient(90deg,var(--brand),var(--brand-2));color:#fff;border:none;border-radius:10px;padding:12px 16px;font-weight:700;cursor:pointer}
    .cta-ghost{border:1px solid var(--brand);background:transparent;color:var(--brand);border-radius:10px;padding:11px 14px;font-weight:700;cursor:pointer}
    .cta-premium{background:linear-gradient(90deg,var(--accent),#e9c8a6);color:#2d261b;border:none;border-radius:12px;padding:14px 18px;font-weight:800;cursor:pointer}

    .result{font-size:34px;font-weight:900}
    .row{display:flex;justify-content:space-between;margin:6px 0}
    .bar{height:8px;border-radius:6px;background:#f1efe9;overflow:hidden}
    .bar > span{display:block;height:100%;background:linear-gradient(90deg,var(--brand),var(--accent))}

    .sidebar-sticky{position:sticky;top:18px;display:grid;gap:12px}
    .why li{margin:6px 0}
    .inline-ad{margin:10px 0}
    .cta-grid{display:grid;gap:10px;margin-top:10px}
    @media(min-width:600px){.cta-grid{grid-template-columns:1fr 1fr}}
    .partner-grid{display:grid;gap:10px;margin-top:10px}
    @media(min-width:700px){.partner-grid{grid-template-columns:1fr 1fr}}
    .partner{display:flex;gap:12px;align-items:center;border:1px solid var(--line);border-radius:12px;padding:10px;background:#fff}
    .partner img{width:56px;height:56px;border-radius:8px;object-fit:cover}

    .three-grid{display:grid;gap:12px}
    @media(min-width:900px){.three-grid{grid-template-columns:repeat(3,1fr)}}
    .card-link{display:block;border:1px solid var(--line);border-radius:12px;overflow:hidden;text-decoration:none;color:inherit;background:#fff}
    .card-link img{width:100%;height:140px;object-fit:cover}
    .card-link h3{font-size:16px;margin:10px 12px;color:var(--brand)}

    footer{padding:28px 0;color:var(--muted);font-size:13px;flex:0 0 auto}

    /* dopamine confetti */
    #confetti{position:fixed;inset:0;pointer-events:none}

    .mode-tabs{display:flex;gap:8px;margin-top:8px}
    .mode-tabs button{border:1px solid var(--line);background:#fff;border-radius:999px;padding:6px 10px;cursor:pointer}
    .mode-tabs button.active{background:var(--brand);color:#fff;border-color:var(--brand)}

    .slider-row{display:flex;align-items:center;gap:10px;margin:6px 0}
    .slider-row input[type=range]{flex:1}
  </style>

  {% block head_extra %}{% endblock %}
</head>
<body>
  <canvas id="confetti"></canvas>
  <div class="container">
    <header>
      <span class="badge">Gratuit</span>
      <a class="brand" href="/">BudgetMariage</a>
      <span class="tagline">Simulateur instantan√©</span>
    </header>

    {% block content %}{% endblock %}
  </div>

  <footer>¬© <span id="y"></span> BudgetMariage.com ‚Äî Outil gratuit</footer>

  <script>
    // ann√©e
    document.getElementById('y').textContent = new Date().getFullYear();

    // Fallback pubs si AdSense ne sert rien
    function adFallback(id){ const el=document.getElementById(id); if(el) el.style.display='block'; }
    setTimeout(()=>{ adFallback('ad-fallback-top'); adFallback('ad-fallback-inline'); adFallback('ad-fallback-side'); }, 2000);

    // Confetti minimal (dopamine)
    const c = document.getElementById('confetti'); const ctx = c.getContext('2d');
    let confs = []; function resize(){c.width=innerWidth; c.height=innerHeight;} resize(); addEventListener('resize',resize);
    function confettiBurst(){
      const colors=['#c99a6d','#e7cdb0','#93b09f','#3e5c49'];
      for(let i=0;i<60;i++){
        confs.push({x:innerWidth/2,y:120, vx:(Math.random()-0.5)*6, vy:(Math.random()*-6)-2, r:Math.random()*3+2, col:colors[Math.floor(Math.random()*colors.length)], life:80});
      }
    }
    (function anim(){ requestAnimationFrame(anim); ctx.clearRect(0,0,c.width,c.height);
      confs = confs.filter(p=>p.life>0);
      confs.forEach(p=>{ p.life--; p.vy+=0.15; p.x+=p.vx; p.y+=p.vy; ctx.beginPath(); ctx.arc(p.x,p.y,p.r,0,6.28); ctx.fillStyle=p.col; ctx.fill();});
    })();
  </script>

  {% block scripts %}{% endblock %}
</body>
</html>
